{
  "name": "slotscribe",
  "version": "0.1.0",
  "description": "SlotScribe MCP tools for verifying Solana agent execution traces anchored via Memo payload hashes.",
  "tools": [
    {
      "name": "verify_tx",
      "description": "Verify a Solana transactionâ€™s SlotScribe payload hash (from Memo) against a stored trace payload hash, and optionally cross-check key tx fields.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "signature": { "type": "string", "description": "Solana transaction signature (base58)." },
          "cluster": {
            "type": "string",
            "enum": ["devnet", "mainnet-beta", "testnet"],
            "default": "devnet",
            "description": "Solana cluster."
          },
          "rpcUrl": { "type": "string", "description": "Optional RPC URL override." },
          "traceHash": { "type": "string", "description": "Optional payload hash. If omitted, tool extracts from Memo." },
          "traceUrlBase": {
            "type": "string",
            "description": "Base URL for trace retrieval, e.g. https://viewer.example.com/api/trace . Tool will GET {base}/{hash}."
          },
          "strict": {
            "type": "boolean",
            "default": true,
            "description": "If true, fail if memo missing or trace missing. If false, return ok=false with reasons."
          },
          "crossCheck": {
            "type": "boolean",
            "default": true,
            "description": "If true, attempt to cross-check to/lamports/programIds using parsed transaction data."
          }
        },
        "required": ["signature", "traceUrlBase"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "cluster": { "type": "string" },
          "signature": { "type": "string" },
          "memoRaw": { "type": "string" },
          "expectedHash": { "type": "string" },
          "computedHash": { "type": "string" },
          "reasons": { "type": "array", "items": { "type": "string" } },
          "txSummary": {
            "type": "object",
            "properties": {
              "feeLamports": { "type": "number" },
              "programIds": { "type": "array", "items": { "type": "string" } },
              "to": { "type": "string" },
              "lamports": { "type": "number" }
            }
          },
          "traceSummary": {
            "type": "object",
            "properties": {
              "intent": { "type": "string" },
              "planSteps": { "type": "array", "items": { "type": "string" } },
              "toolCallCount": { "type": "number" }
            }
          }
        },
        "required": ["ok", "signature", "expectedHash", "computedHash", "reasons"]
      }
    },
    {
      "name": "get_trace",
      "description": "Fetch a SlotScribe trace by payload hash.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "hash": { "type": "string", "description": "Payload hash (sha256 hex)." },
          "traceUrlBase": { "type": "string", "description": "Base URL to GET {base}/{hash}." }
        },
        "required": ["hash", "traceUrlBase"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "hash": { "type": "string" },
          "trace": { "type": "object", "description": "The full trace JSON." }
        },
        "required": ["hash", "trace"]
      }
    },
    {
      "name": "explain_verification",
      "description": "Given a verify_tx result, produce a concise human-readable explanation suitable for end users (e.g., in a UI or chat).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "result": { "type": "object", "description": "The verify_tx output JSON." },
          "maxBullets": { "type": "number", "default": 6 }
        },
        "required": ["result"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "summary": { "type": "string" },
          "bullets": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["summary", "bullets"]
      }
    }
  ]
}
